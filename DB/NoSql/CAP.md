## CAP 的 3 选 2

- C：强一致性
- A：高可用
- P：分布式容忍性

CAP 理论就是说在分布式存储系统中，最多只能实现其中的两点。<u>没有 NOSQL系统能同时保证这三点。</u>
- CA：传统 Oracle数据库
- ==**AP**：大多数网站架构的选择==
- CP：Redis、 Mongodb

而由于当前的网络硬件肯定会出现<u>延迟丢包</u>等问题，==所么**分区容忍性(P)** 是我们必须需要实现的。==
所以我们**只能在一致性(C)和可用性(A)之间进行抉择**，多余大多数Web应用，其实并不需要强一致性。

## 一致性与可用性的決择

对于web2.0网站来说，关系数据库的很多主要特性却往往无用武之地，
因此<u>==牺牲 C 换取 P==，大多数的网站架构都选择 AP</u>，这是目前分布式数据库产品的方向么一致性与可用性的决择。

原因有一下几点：
- **数据库事务一致性需求**

很多web实时系统并不要求严格的数据库事务，<u>对读一致性的要求很低，有些场合对写一致性要求并不高，允许弱一致性，允许实现最终一致性。</u>

- **数据库的写实时性和读实时性需求**

对关系数据库来悦，插入一条数据之后立刻查询，是肯定可以读出来这条数据的，但是对于很多 web 应用来说，并不要求这么高的实时性，比方说发一条消息之后，过几秒乃至十几秒之后，我的订阅者才看到这条动态是完全可以接受的。

- **对复杂的SOL查询，特别是多表关联查询的需求**

任何大数据量的 web 系统，都非常忌讳多个大表的关联查询，以及复杂的数据分析类型的报表查询，特别是 SNS 类型的网站，从需求以及产品设计角度，就避免了这种情况的产生。往往更多的只是单表的主键查询，以及单表的简单条件查询，SQL 的功能被极大的弱化了


## BASE

BASE 就是
为了解决<u>关系数据库</u> **强一致性引起的问题而引起的可用性降低** 而提出的解决方案。

BASE其实是下面三个术语的缩写: 

- BA：基本可用( Basically Available) 
- S：软状态( Soft state) 
- E：最终一致( Eventually consistent)
 
它的思想是通过
让系统 **放松对某一时刻数据一致性的要求** 来 <u>换取系统整体伸缩性和性能上改观</u>。

为什么这么说呢，缘由就在于大型系统往往由于地域分布和极高性能的要求，不可能采用分布式事务来完成这些指标，
要想获得这些指标，我们必须采用另外一种方式来完成，这里BASE就是解决这个问题的办法。

## 分布式、集群

### 分布式系统 (distributed system) 

由多台计算机和通信的软件组件通过计算机网络连接(本地网络或广域网)组成。
分布式系统是建立在网络之上的软件系统。

正是因为软件的特性，所以分布式系统具有高度的<u>内聚性</u>和<u>透明性</u>。
因此，网络和分布式系统之间的区别更多的在于高层软件(特别是操作系统)，而不是硬件。
分布式系统可以应用在在不同的平台上如：Pc、工作站、局域网和广域网上等。


简单来讲: 
- **分布式**：不同的多台服务器上面部署 **<u>不同</u>的服务模块**(工程)，他们之间通过 **`Rpc/Rmi`** 之间通信和调用，对外提供服务和组内协作。
- **集群**：不同的多台服务器上面部署 **<u>相同</u>的服务模块**，通过<u>分布式调度软件</u>进行统一的调度，对外提供服务和访问了